<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 8.0.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha256-VHqXKFhhMxcpubYf9xiWdCiojEbY9NexQ4jh8AxbvcM=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.zhaolq.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.25.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"always","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"androidstudio","dark":"androidstudio"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":true,"style":"mac"},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.json","localsearch":{"enable":true,"top_n_per_article":1,"unescape":true,"preload":false}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="推荐：   正则表达式 - 维基百科   正则表达式 - 菜鸟   Java正则表达式 - 菜鸟  重用正则总结1([a-zA-Z -]*)([0-9]*)    # 利用捕获组匹配，可匹配字符串示例：&quot;abc90&quot;、&quot;90&quot;，第一组为字符串（空或abc），第二组为数字（90）。  正则表达式定义 正则表达式定义了字符串的模式。 正则表达式可以用来搜索、编辑">
<meta property="og:type" content="article">
<meta property="og:title" content="11Java正则表达式">
<meta property="og:url" content="https://blog.zhaolq.com/article/2015/10/11Java%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/index.html">
<meta property="og:site_name" content="洋蔥">
<meta property="og:description" content="推荐：   正则表达式 - 维基百科   正则表达式 - 菜鸟   Java正则表达式 - 菜鸟  重用正则总结1([a-zA-Z -]*)([0-9]*)    # 利用捕获组匹配，可匹配字符串示例：&quot;abc90&quot;、&quot;90&quot;，第一组为字符串（空或abc），第二组为数字（90）。  正则表达式定义 正则表达式定义了字符串的模式。 正则表达式可以用来搜索、编辑">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog.zhaolq.com/article/2015/10/11Java%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/1118380-20180628112103862-891523599.png">
<meta property="article:published_time" content="2015-10-05T01:00:00.000Z">
<meta property="article:modified_time" content="2015-10-05T01:00:00.000Z">
<meta property="article:author" content="zhaolq">
<meta property="article:tag" content="Java基础">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.zhaolq.com/article/2015/10/11Java%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/1118380-20180628112103862-891523599.png">


<link rel="canonical" href="https://blog.zhaolq.com/article/2015/10/11Java%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://blog.zhaolq.com/article/2015/10/11Java%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/","path":"article/2015/10/11Java正则表达式/","title":"11Java正则表达式"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>11Java正则表达式 | 洋蔥</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.umd.js" integrity="sha256-a+H7FYzJv6oU2hfsfDGM2Ohw/cR9v+hPfxHCLdmCrE8=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.5.0/search.js" integrity="sha256-xFC6PJ82SL9b3WkGjFavNiA9gm5z6UBxWPiu4CYjptg=" crossorigin="anonymous" defer></script>
<script src="/js/third-party/search/local-search.js" defer></script>




  <script src="/js/third-party/fancybox.js" defer></script>



  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">洋蔥</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">贪婪，找不到比这更好的词了，是件好事。</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%87%8D%E7%94%A8%E6%AD%A3%E5%88%99%E6%80%BB%E7%BB%93"><span class="nav-number">1.</span> <span class="nav-text">重用正则总结</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">2.</span> <span class="nav-text">正则表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89"><span class="nav-number">2.1.</span> <span class="nav-text">定义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BD%AC%E4%B9%89"><span class="nav-number">2.2.</span> <span class="nav-text">转义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%85%83%E5%AD%97%E7%AC%A6"><span class="nav-number">2.3.</span> <span class="nav-text">常用元字符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E8%A7%84%E5%88%99"><span class="nav-number">2.4.</span> <span class="nav-text">常见规则</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#String%E7%B1%BB"><span class="nav-number">3.</span> <span class="nav-text">String类</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Pattern%E5%92%8CMatcher%E7%B1%BB"><span class="nav-number">4.</span> <span class="nav-text">Pattern和Matcher类</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8D%95%E8%8E%B7%E7%BB%84"><span class="nav-number">5.</span> <span class="nav-text">捕获组</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%AD%A3%E5%88%99%E6%B3%A8%E5%85%A5-regex-injection"><span class="nav-number">6.</span> <span class="nav-text">正则注入(regex injection)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ReDos%E6%94%BB%E5%87%BB"><span class="nav-number">7.</span> <span class="nav-text">ReDos攻击</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B"><span class="nav-number">8.</span> <span class="nav-text">案例</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%A1%E9%AA%8Cqq%E5%8F%B7%E7%A0%81"><span class="nav-number">8.1.</span> <span class="nav-text">校验qq号码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%A1%E9%AA%8C%E7%94%B5%E8%AF%9D%E5%8F%B7%E7%A0%81%E5%92%8C%E9%82%AE%E7%AE%B1"><span class="nav-number">8.2.</span> <span class="nav-text">校验电话号码和邮箱</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%89%E7%85%A7%E4%B8%8D%E5%90%8C%E7%9A%84%E8%A7%84%E5%88%99%E5%88%86%E5%89%B2%E6%95%B0%E6%8D%AE"><span class="nav-number">8.3.</span> <span class="nav-text">按照不同的规则分割数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8A%8A%E8%AE%BA%E5%9D%9B%E4%B8%AD%E7%9A%84%E6%95%B0%E5%AD%97%E6%9B%BF%E6%8D%A2%E4%B8%BA"><span class="nav-number">8.4.</span> <span class="nav-text">把论坛中的数字替换为*</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E7%94%B13%E4%B8%AA%E5%AD%97%E7%AC%A6%E7%BB%84%E6%88%90%E7%9A%84%E5%8D%95%E8%AF%8D"><span class="nav-number">8.5.</span> <span class="nav-text">获取字符串中由3个字符组成的单词</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="zhaolq"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">zhaolq</p>
  <div class="site-description" itemprop="description">有用、有趣、有情义！</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">554</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">38</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">38</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/hellozhaolq" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hellozhaolq" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:hello.zhaolq@qq.com" title="E-Mail → mailto:hello.zhaolq@qq.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.zhaolq.com/article/2015/10/11Java%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhaolq">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="洋蔥">
      <meta itemprop="description" content="有用、有趣、有情义！">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="11Java正则表达式 | 洋蔥">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          11Java正则表达式
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-10-05 09:00:00" itemprop="dateCreated datePublished" datetime="2015-10-05T09:00:00+08:00">2015-10-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p><font color="blue"><strong>推荐：</strong></font> </p>
<p> <a target="_blank" rel="noopener" href="https://zh.wikipedia.org/zh-cn/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F">正则表达式 - 维基百科</a> </p>
<p> <a target="_blank" rel="noopener" href="https://www.runoob.com/regexp/regexp-tutorial.html">正则表达式 - 菜鸟</a> </p>
<p> <a target="_blank" rel="noopener" href="https://www.runoob.com/java/java-regular-expressions.html">Java正则表达式 - 菜鸟</a> </p>
<h1 id="重用正则总结"><a href="#重用正则总结" class="headerlink" title="重用正则总结"></a>重用正则总结</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">([a-zA-Z -]*)([0-9]*)    # 利用捕获组匹配，可匹配字符串示例：&quot;abc90&quot;、&quot;90&quot;，第一组为字符串（空或abc），第二组为数字（90）。</span><br></pre></td></tr></table></figure>

<h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><ul>
<li>正则表达式定义了字符串的模式。</li>
<li>正则表达式可以用来搜索、编辑或处理文本。</li>
<li>正则表达式并不仅限于某一种语言，但是在每种语言中有细微的差别。</li>
</ul>
<h2 id="转义"><a href="#转义" class="headerlink" title="转义"></a>转义</h2><ul>
<li>在 Java 中，<code>\\</code> 表示：我要插入一个正则表达式的反斜线，所以其后的字符具有特殊意义。</li>
<li>在其他语言中（如Perl），一个反斜杠 <code>\</code> 就足以具有转义的作用，而在 Java 中则需要有两个反斜杠才能被解析为其他语言中的转义作用。</li>
<li>Java 的正则表达式中，两个 <code>\\</code> 代表其他语言中的一个 <code>\</code>，这也就是为什么表示一位数字的正则表达式是 <code>\\d</code>，而表示一个普通的反斜杠是 <code>\\\\</code>。</li>
</ul>
<h2 id="常用元字符"><a href="#常用元字符" class="headerlink" title="常用元字符"></a>常用元字符</h2><p> <code>^</code> 、 <code>$</code> 、 <code>*</code> 、 <code>+</code> 、 <code>?</code> 、 <code>[a-z]</code> 、 <code>\w</code> 、 <code>\W</code> 、 <code>{n, m}</code> </p>
<h2 id="常见规则"><a href="#常见规则" class="headerlink" title="常见规则"></a>常见规则</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">A:字符</span><br><span class="line">    x 字符 x。 举例：&#x27;a&#x27;表示字符a</span><br><span class="line">    \\ 反斜线字符。 两个杠才能表示一个杠，杠具有转义作用。</span><br><span class="line">    \n 新行（换行）符 (&#x27;\u000A&#x27;)</span><br><span class="line">    \r 回车符 (&#x27;\u000D&#x27;)</span><br><span class="line">B:字符类</span><br><span class="line">    [abc] a、b 或 c（简单类）</span><br><span class="line">    [^abc] 任何字符，除了 a、b 或 c（否定）</span><br><span class="line">    [a-zA-Z] a到 z 或 A到 Z，两头的字母包括在内（范围）</span><br><span class="line">    [0-9] 0到9的字符都包括</span><br><span class="line">C:预定义字符类</span><br><span class="line">    . 任何字符（与行结束符可能匹配也可能不匹配）。&#x27;.&#x27; 字符本身，怎么表示呢? \.</span><br><span class="line">    \d 数字：[0-9]</span><br><span class="line">    \w 单词字符：[a-zA-Z_0-9]</span><br><span class="line">D:边界匹配器</span><br><span class="line">    ^ 行的开头</span><br><span class="line">    $ 行的结尾</span><br><span class="line">    \b 单词边界</span><br><span class="line">        不是单词字符的地方就是单词边界。</span><br><span class="line">        举例：hello world?haha;xixi 有三个单词边界</span><br><span class="line">E:Greedy 数量词</span><br><span class="line">    X? X，一次或一次也没有</span><br><span class="line">    X* X，零次或多次</span><br><span class="line">    X+ X，一次或多次</span><br><span class="line">    X&#123;n&#125; X，恰好 n 次</span><br><span class="line">    X&#123;n,&#125; X，至少 n 次</span><br><span class="line">    X&#123;n,m&#125; X，至少 n 次，但是不超过 m 次</span><br></pre></td></tr></table></figure>

<h1 id="String类"><a href="#String类" class="headerlink" title="String类"></a>String类</h1><p>String 类中有几个可以使用正则的方法，实际都是通过调用 <font color="red"><strong>Pattern、Matcher</strong></font> 类实现的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 判断功能</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">matches</span><span class="params">(String regex)</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">// 替换功能</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">replaceFirst</span><span class="params">(String regex, String replacement)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">replaceAll</span><span class="params">(String regex, String replacement)</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">// 分割功能</span></span><br><span class="line"><span class="keyword">public</span> String[] split(String regex)</span><br><span class="line"><span class="keyword">public</span> String[] split(String regex, <span class="type">int</span> limit)</span><br></pre></td></tr></table></figure>

<h1 id="Pattern和Matcher类"><a href="#Pattern和Matcher类" class="headerlink" title="Pattern和Matcher类"></a>Pattern和Matcher类</h1><p><font color="red" size="4"><strong>Pattern 类</strong></font>：正则表达式的编译表示，没有公共构造方法。</p>
<p>使用方法：正则表达式字符串先被编译为此类的实例，然后用得到的 Pattern 对象创建 Matcher 对象。执行 matcher 方法后的所有匹配都驻留在匹配器 Matcher  中，所以多个匹配器可以共享同一模式。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Pattern <span class="title function_">compile</span><span class="params">(String regex)</span> <span class="comment">// 将给定的正则表达式编译成一个模式。</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Pattern <span class="title function_">compile</span><span class="params">(String regex, <span class="type">int</span> flags)</span> <span class="comment">// 将给定的正则表达式编译成具有给定标志的模式。</span></span><br><span class="line"><span class="keyword">public</span> Matcher <span class="title function_">matcher</span><span class="params">(CharSequence input)</span> <span class="comment">// 创建一个匹配器，将给定输入与此模式匹配。</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">matches</span><span class="params">(String regex, CharSequence input)</span> <span class="comment">// 编译给定的正则表达式并尝试匹配给定的输入。</span></span><br></pre></td></tr></table></figure>

<p><font color="red" size="4"><strong>Matcher 类</strong></font>：没有公共构造方法。</p>
<p>通过解释 Pattern 对字符序列执行匹配操作的<font color="red">引擎</font>。</p>
<p>匹配器通过调用 Pattern 的 matcher 方法创建一个 Matcher 对象。创建后，Matcher 可用于执行三种不同类型的匹配操作：</p>
<ul>
<li>matches 方法尝试将整个输入序列与模式匹配。</li>
<li>lookingAt 方法尝试将输入序列与模式匹配，从头开始。</li>
<li>find 方法扫描输入序列以查找与模式匹配的下一个子序列。</li>
</ul>
<p>每个方法都返回一个表示成功或失败的布尔值。通过查询匹配器的状态可以获取关于成功匹配的更多信息。</p>
<p>如果匹配成功，则可以通过 start、end 和 group 方法获取更多信息。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">matches</span><span class="params">()</span>：尝试将整个区域与模式匹配。</span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">find</span><span class="params">()</span>:尝试查找与该模式匹配的输入序列的下一个子序列。 如果匹配成功，则可以通过 start、end 和 group 方法获取更多信息。 </span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">group</span><span class="params">()</span>:返回由以前匹配操作所匹配的输入子序列。以前匹配操作所匹配的字符串形式的子序列（可能为空）。</span><br></pre></td></tr></table></figure>

<p><font color="red" size="4"><strong>PatternSyntaxException 类</strong></font>：一个非强制异常类，它表示一个正则表达式模式中的语法错误。</p>
<p><font color="blue" size="4"><strong>具体使用说明及更多方法见 API。</strong></font></p>
<p>典型调用顺序</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Pattern</span> <span class="variable">p</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;a*b&quot;</span>); <span class="comment">// 正则表达式字符串先被编译为Pattern实例。</span></span><br><span class="line"><span class="type">Matcher</span> <span class="variable">m</span> <span class="operator">=</span> p.matcher(<span class="string">&quot;aaaaab&quot;</span>); <span class="comment">// 用得到的Pattern对象创建Matcher对象，所有状态都驻留在匹配器Matcher中。多个匹配器可以共享同一模式。</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> m.matches();</span><br><span class="line"></span><br><span class="line">Pattern.compile(regex).matcher(input).matches()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> Pattern.matches(<span class="string">&quot;a*b&quot;</span>, <span class="string">&quot;aaaaab&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>练习</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 获取功能</span></span><br><span class="line"><span class="comment">*        Pattern和Matcher类的使用</span></span><br><span class="line"><span class="comment">*        模式和匹配器的基本使用顺序</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RegexDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 模式和匹配器的典型调用顺序</span></span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">p</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;a*b&quot;</span>);<span class="comment">// 先吧正则表达式字符串编译为Pattern实例。</span></span><br><span class="line">        <span class="type">Matcher</span> <span class="variable">m</span> <span class="operator">=</span> p.matcher(<span class="string">&quot;aaaaab&quot;</span>);<span class="comment">// 用得到的Pattern对象创建Matcher对象，所有状态都驻留在匹配器Matcher中。</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> m.matches(); <span class="comment">// 调用匹配器对象的功能</span></span><br><span class="line">        <span class="comment">// boolean b = Pattern.compile(&quot;a*b&quot;).matcher(&quot;aaaaab&quot;).matches(); // 链式调用 Pattern.compile(regex).matcher(input).matches()</span></span><br><span class="line">        <span class="comment">// boolean b = Pattern.matches(&quot;a*b&quot;, &quot;aaaaab&quot;); // 简化调用 Pattern.matches(regex, input)</span></span><br><span class="line">        System.out.println(b); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">bb</span> <span class="operator">=</span> p.matcher(<span class="string">&quot;aaaaa&quot;</span>).matches();<span class="comment">// 多个匹配器可以共享同一模式。</span></span><br><span class="line">        System.out.println(bb); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 用String类</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;aaaaab&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;a*b&quot;</span>;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">cc</span> <span class="operator">=</span> str.matches(regex); <span class="comment">// 与上面的&quot;链式调用&quot;和&quot;简化调用&quot;行为相同</span></span><br><span class="line">        System.out.println(cc);<span class="comment">// true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="捕获组"><a href="#捕获组" class="headerlink" title="捕获组"></a>捕获组</h1><ul>
<li>捕获组是把多个字符当一个单独单元进行处理的方法，它通过对括号内的字符分组来创建。</li>
<li>捕获组是通过从左至右计算其开括号来编号。例如，在表达式 <code>((A)(B(C)))</code>，有四个这样的组：<code>((A)(B(C)))</code>、<code>(A)</code>、<code>(B(C))</code>、<code>(C)</code>。</li>
<li>Matcher 类的 groupCount 方法返回一个 int 值，表示 Matcher 对象有多个捕获组。</li>
<li>group(0) 是一个特殊的组，代表整个表达式。该组不包括在 groupCount 的返回值中。</li>
</ul>
<p>用法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RegexDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> <span class="string">&quot;This order was placed for QT3000! OK?&quot;</span>;</span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">pattern</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;(\\D*)(\\d+)(.*)&quot;</span>);</span><br><span class="line">        <span class="type">Matcher</span> <span class="variable">matcher</span> <span class="operator">=</span> pattern.matcher(line);</span><br><span class="line">        <span class="keyword">if</span> (matcher.find()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Found value: &quot;</span> + matcher.group(<span class="number">0</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;Found value: &quot;</span> + matcher.group(<span class="number">1</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;Found value: &quot;</span> + matcher.group(<span class="number">2</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;Found value: &quot;</span> + matcher.group(<span class="number">3</span>));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;NO MATCH&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Found value: This order was placed for QT3000! OK?</span><br><span class="line">Found value: This order was placed for QT</span><br><span class="line">Found value: 3000</span><br><span class="line">Found value: ! OK?</span><br></pre></td></tr></table></figure>

<h1 id="正则注入-regex-injection"><a href="#正则注入-regex-injection" class="headerlink" title="正则注入(regex injection)"></a>正则注入(regex injection)</h1><p><font color="red" size="4"><strong>定义</strong></font> </p>
<p>攻击者可能会通过恶意构造的输入对初始化的正则表达式进行修改，比如导致正则表达式不符合程序规定要求；可能会影响控制流，导致信息泄露，或导致ReDos攻击。</p>
<p>避免使用不可信数据构造正则表达式。</p>
<p><font color="red" size="4"><strong>利用方式</strong></font> </p>
<ul>
<li><strong>匹配标志</strong>：不可信的输入可能覆盖匹配选项，然后有可能会被传给 <code>Pattern.compile()</code> 方法。</li>
<li><strong>贪赞</strong>：一个非受信的输入可能试图注入一个正则表达式，通过它来改变初始的那个正则表达式，从而匹配尽可能多的字符串，从而暴露敏感信息。</li>
<li><strong>分组</strong>：程序员会用括号包括一部分的正则表达式以完成一组动作中某些共同的部分。攻击者可能通过提供非受信的输入来改变这种分组。</li>
</ul>
<p><font color="red" size="4"><strong>输入校验</strong></font> </p>
<ul>
<li>非受信的输入应该在使用前净化，从而防止发生正则表达式注入。</li>
<li>当用户必须指定正则表达式作为输入时，必须注意需要保证初始的正则表达式没有被无限制修改。</li>
<li>在用户输入字符串提交给正则解析之前，进行白名单字符处理 (比如字母和数字)。</li>
<li>开发人员必须仅仅提供有限的正则表达式功能给用户，从而减少被误用的可能。</li>
</ul>
<h1 id="ReDos攻击"><a href="#ReDos攻击" class="headerlink" title="ReDos攻击"></a><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/ReDoS">ReDos</a>攻击</h1><p><strong>正则表达式拒绝服务</strong>( <strong><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/ReDoS">ReDoS</a></strong> ) 是一种<strong>算法复杂性攻击</strong>，它通过提供 <code>正则表达式</code> 或 <code>需要很长时间评估的输入</code> 来产生拒绝服务（即：通过提供特制的正则表达式或输入来使程序花费大量时间，消耗系统资源，然后程序将变慢或变得无响应）。</p>
<p><font color="red" size="4"><strong><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/ReDoS">ReDos</a>攻击概述</strong></font> </p>
<ul>
<li>JDK 中提供的正则匹配使用的是 NFA 引擎。</li>
<li>NFA 引擎具有<font color="blue"><strong>回溯机制</strong></font>（一个字符可能尝试多次匹配），匹配失败时花费时间很大。 <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/27417442">正则表达式回溯法原理</a> </li>
<li>当使用简单的非分组正则表达式时，是不会导致ReDos攻击的。</li>
</ul>
<p><font color="red" size="4"><strong>潜在危险</strong></font> </p>
<ul>
<li>包含具有自我重复的重复性分组的正则<br>举例：<code>^(\d+)+$</code>、<code>^(\d*)*$</code>、<code>^(\d+)*$</code>、<code>^(\d+|\s+)*$</code> </li>
<li>包含替换的重复性分组<br>举例：<code>^(\d|\d|\d)+$</code>、<code>^(\d|\d?)+$</code></li>
</ul>
<blockquote>
<p>当输入字符串为 <code>1111111111111111111111x1</code> 时，正则表达式 <code>^(\d+)+$</code> 就会不断进行失败重试，从而耗死CPU计算。</p>
<p>解析： <code>\d+</code> 表示匹配一个或多个数字； <code>()+</code> 表示分组本身也匹配一个或多个；那么匹配字符串 <code>1111111111111111111111x1</code> 就会进行非常多的尝试，从而导致CPU资源枯竭。</p>
</blockquote>
<p><font color="red" size="4"><strong>规避猎施</strong></font> </p>
<ul>
<li>进行正则匹配前，先对<strong>匹配的文本</strong>的长度进行<strong>校验</strong>。</li>
<li>在编写正则时，尽量<strong>不要使用过于复杂的正则</strong>，越复杂越容易有缺陷。</li>
<li>在编写正则时，尽量<strong>减少分组</strong>的使用。</li>
<li><strong>避免动态构建正则</strong>（因为难以判断是否有性能问题），当使用不可信数据构造正则时，要使用白名单进行严格校验。</li>
</ul>
<h1 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h1><h2 id="校验qq号码"><a href="#校验qq号码" class="headerlink" title="校验qq号码"></a>校验qq号码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 校验qq号码.</span></span><br><span class="line"><span class="comment">*         1:要求必须是5-15位数字</span></span><br><span class="line"><span class="comment">*         2:0不能开头</span></span><br><span class="line"><span class="comment">* 分析：</span></span><br><span class="line"><span class="comment">*         A:键盘录入一个QQ号码</span></span><br><span class="line"><span class="comment">*         B:写一个功能实现校验</span></span><br><span class="line"><span class="comment">*         C:调用功能，输出结果。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RegexDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建键盘录入对象</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入你的QQ号码：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">qq</span> <span class="operator">=</span> sc.nextLine();</span><br><span class="line">        System.out.println(<span class="string">&quot;checkQQ:&quot;</span> + checkQQ(qq));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 写一个功能实现校验两个明确：明确返回值类型：boolean 明确参数列表：String qq</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">checkQQ</span><span class="params">(String qq)</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="comment">// 校验长度</span></span><br><span class="line">        <span class="keyword">if</span> (qq.length() &gt;= <span class="number">5</span> &amp;&amp; qq.length() &lt;= <span class="number">15</span>) &#123;</span><br><span class="line">            <span class="comment">// 0不能开头</span></span><br><span class="line">            <span class="keyword">if</span> (!qq.startsWith(<span class="string">&quot;0&quot;</span>)) &#123;</span><br><span class="line">                <span class="comment">// 必须是数字</span></span><br><span class="line">                <span class="type">char</span>[] chs = qq.toCharArray();</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span>; x &lt; chs.length; x++) &#123;</span><br><span class="line">                    <span class="type">char</span> <span class="variable">ch</span> <span class="operator">=</span> chs[x];</span><br><span class="line">                    <span class="keyword">if</span> (!Character.isDigit(ch)) &#123;</span><br><span class="line">                        flag = <span class="literal">false</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                flag = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            flag = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用正则表达式改进：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RegexDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建键盘录入对象</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入你的QQ号码：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">qq</span> <span class="operator">=</span> sc.nextLine();</span><br><span class="line">        System.out.println(<span class="string">&quot;checkQQ:&quot;</span> + checkQQ(qq));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">checkQQ</span><span class="params">(String qq)</span> &#123;</span><br><span class="line">        <span class="comment">// String类的 public boolean matches(String regex)告知此字符串是否匹配给定的正则表达式</span></span><br><span class="line">        <span class="comment">// return qq.matches(&quot;[1-9][0-9]&#123;4,14&#125;&quot;);</span></span><br><span class="line">        <span class="keyword">return</span> qq.matches(<span class="string">&quot;[1-9]\\d&#123;4,14&#125;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="校验电话号码和邮箱"><a href="#校验电话号码和邮箱" class="headerlink" title="校验电话号码和邮箱"></a>校验电话号码和邮箱</h2><p><img src="/article/2015/10/11Java%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/1118380-20180628112103862-891523599.png" alt="img"></p>
<h2 id="按照不同的规则分割数据"><a href="#按照不同的规则分割数据" class="headerlink" title="按照不同的规则分割数据"></a>按照不同的规则分割数据</h2><p>一：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 分割功能</span></span><br><span class="line"><span class="comment">*        String类的public String[] split(String regex):根据给定正则表达式的匹配拆分此字符串。</span></span><br><span class="line"><span class="comment">* 举例：</span></span><br><span class="line"><span class="comment">*         百合网，世纪佳缘,珍爱网,QQ</span></span><br><span class="line"><span class="comment">*         搜索好友</span></span><br><span class="line"><span class="comment">*             性别：女</span></span><br><span class="line"><span class="comment">*             范围：&quot;18-24&quot;</span></span><br><span class="line"><span class="comment">*         age&gt;=18 &amp;&amp; age&lt;=24</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RegexDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 定义一个年龄搜索范围</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">ages</span> <span class="operator">=</span> <span class="string">&quot;18-24&quot;</span>;</span><br><span class="line">        <span class="comment">// 定义规则</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;-&quot;</span>;</span><br><span class="line">        <span class="comment">// 调用方法</span></span><br><span class="line">        String[] strArray = ages.split(regex);</span><br><span class="line">        <span class="comment">// //遍历</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span>; x &lt; strArray.length; x++) &#123;</span><br><span class="line">            System.out.println(strArray[x]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 如何得到int类型的呢?</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">startAge</span> <span class="operator">=</span> Integer.parseInt(strArray[<span class="number">0</span>]);</span><br><span class="line">        <span class="type">int</span> <span class="variable">endAge</span> <span class="operator">=</span> Integer.parseInt(strArray[<span class="number">1</span>]);</span><br><span class="line">        <span class="comment">// 键盘录入年龄</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入你的年龄：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line">        <span class="keyword">if</span> (age &gt;= startAge &amp;&amp; age &lt;= endAge) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;你就是我想找的&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;不符合我的要求，gun&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>二：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 分割功能练习</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RegexDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 定义一个字符串</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="string">&quot;aa,bb,cc&quot;</span>;</span><br><span class="line">        <span class="comment">// 直接分割</span></span><br><span class="line">        String[] str1Array = s1.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span>; x &lt; str1Array.length; x++) &#123;</span><br><span class="line">            System.out.println(str1Array[x]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="string">&quot;aa.bb.cc&quot;</span>;</span><br><span class="line">        String[] str2Array = s2.split(<span class="string">&quot;\\.&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span>; x &lt; str2Array.length; x++) &#123;</span><br><span class="line">            System.out.println(str2Array[x]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="string">&quot;aa bb cc&quot;</span>;</span><br><span class="line">        String[] str3Array = s3.split(<span class="string">&quot; +&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span>; x &lt; str3Array.length; x++) &#123;</span><br><span class="line">            System.out.println(str3Array[x]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 硬盘上的路径，我们应该用\\替代\</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s4</span> <span class="operator">=</span> <span class="string">&quot;E:\\JavaSE\\day14\\avi&quot;</span>;</span><br><span class="line">        String[] str4Array = s4.split(<span class="string">&quot;\\\\&quot;</span>);<span class="comment">// 两个杠代表一个杠</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span>; x &lt; str4Array.length; x++) &#123;</span><br><span class="line">            System.out.println(str4Array[x]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>三：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 我有如下一个字符串:&quot;91 27 46 38 50&quot;</span></span><br><span class="line"><span class="comment">* 请写代码实现最终输出结果是：&quot;27 38 46 50 91&quot;</span></span><br><span class="line"><span class="comment">* 分析：</span></span><br><span class="line"><span class="comment">*         A:定义一个字符串</span></span><br><span class="line"><span class="comment">*         B:把字符串进行分割，得到一个字符串数组</span></span><br><span class="line"><span class="comment">*         C:把字符串数组变换成int数组</span></span><br><span class="line"><span class="comment">*         D:对int数组排序</span></span><br><span class="line"><span class="comment">*         E:把排序后的int数组在组装成一个字符串</span></span><br><span class="line"><span class="comment">*         F:输出字符串</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RegexDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;91 27 46 38 50&quot;</span>;</span><br><span class="line">        String[] strArray = s.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[strArray.length];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span>; x &lt; arr.length; x++) &#123;</span><br><span class="line">            arr[x] = Integer.parseInt(strArray[x]);</span><br><span class="line">        &#125;</span><br><span class="line">        Arrays.sort(arr);</span><br><span class="line">        <span class="comment">// String result1 = Arrays.toString(arr);</span></span><br><span class="line">        <span class="comment">// System.out.println(&quot;result1:&quot;+result1);// result1:[27, 38, 46, 50, 91]</span></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span>; x &lt; arr.length; x++) &#123;</span><br><span class="line">            sb.append(arr[x]).append(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">result2</span> <span class="operator">=</span> sb.toString().trim();</span><br><span class="line">        System.out.println(<span class="string">&quot;result2:&quot;</span> + result2);<span class="comment">// result2:27 38 46 50 91</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="把论坛中的数字替换为"><a href="#把论坛中的数字替换为" class="headerlink" title="把论坛中的数字替换为*"></a>把论坛中的数字替换为*</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 替换功能</span></span><br><span class="line"><span class="comment">*     String类的public String replaceAll(String regex,String replacement)</span></span><br><span class="line"><span class="comment">*     使用给定的 replacement 替换此字符串所有匹配给定的正则表达式的子字符串。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RegexDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;hello!qq:12345;world!kh:622112345678;java!&quot;</span>;</span><br><span class="line">        <span class="comment">// 我要去除所有的数字,用*给替换掉</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">regex1</span> <span class="operator">=</span> <span class="string">&quot;\\d+&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">ss1</span> <span class="operator">=</span> <span class="string">&quot;*&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">result1</span> <span class="operator">=</span> str.replaceAll(regex1, ss1);</span><br><span class="line">        System.out.println(result1); <span class="comment">// hello!qq:*;world!kh:*;java!</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">regex2</span> <span class="operator">=</span> <span class="string">&quot;\\d&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">ss2</span> <span class="operator">=</span> <span class="string">&quot;*&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">result2</span> <span class="operator">=</span> str.replaceAll(regex2, ss2);</span><br><span class="line">        System.out.println(result2); <span class="comment">// hello!qq:*****;world!kh:************;java!</span></span><br><span class="line">        <span class="comment">// 直接把数字干掉</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">regex3</span> <span class="operator">=</span> <span class="string">&quot;\\d+&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">ss3</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">result3</span> <span class="operator">=</span> str.replaceAll(regex3, ss3);</span><br><span class="line">        System.out.println(result3); <span class="comment">// hello!qq:;world!kh:;java!</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="获取字符串中由3个字符组成的单词"><a href="#获取字符串中由3个字符组成的单词" class="headerlink" title="获取字符串中由3个字符组成的单词"></a>获取字符串中由3个字符组成的单词</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 获取功能：</span></span><br><span class="line"><span class="comment">* 获取下面这个字符串中由三个字符组成的单词</span></span><br><span class="line"><span class="comment">* da jia ting wo shuo,jin tian yao xia yu,bu shang wan zi xi,gao xing bu?</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RegexDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;da jia ting wo shuo,jin tian yao xia yu,bu shang wan zi xi,gao xing bu?&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;\\b\\w&#123;3&#125;\\b&quot;</span>;<span class="comment">// 正则表达式</span></span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">p</span> <span class="operator">=</span> Pattern.compile(regex);<span class="comment">// 把正则表达式编译成模式对象</span></span><br><span class="line">        <span class="type">Matcher</span> <span class="variable">m</span> <span class="operator">=</span> p.matcher(s);<span class="comment">// 通过模式对象得到匹配器对象</span></span><br><span class="line">        <span class="comment">// 调用匹配器对象的功能,通过find方法就是查找有没有满足条件的子串:public boolean find()</span></span><br><span class="line">        <span class="keyword">while</span> (m.find()) &#123;</span><br><span class="line">            <span class="comment">// 如何得到值呢? public String group()</span></span><br><span class="line">            System.out.println(m.group());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 注意：一定要先find()，然后才能group()</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>请我一杯咖啡吧！</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.png" alt="zhaolq 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="/images/alipay.png" alt="zhaolq 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/Java%E5%9F%BA%E7%A1%80/" rel="tag"># Java基础</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/article/2015/10/10Java%E9%9B%86%E5%90%88/" rel="prev" title="10Java集合">
                  <i class="fa fa-angle-left"></i> 10Java集合
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/article/2015/10/12Java%E5%BC%82%E5%B8%B8/" rel="next" title="12Java异常">
                  12Java异常 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2019 – 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">zhaolq</span>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

</body>
</html>
